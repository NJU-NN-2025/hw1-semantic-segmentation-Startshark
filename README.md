# å—æåŠ¨ç‰©è¯­ä¹‰åˆ†å‰²é¡¹ç›®

æœ¬é¡¹ç›®åŸºäº **YOLOv8-seg** æ¨¡å‹ï¼Œå®ç°äº†å¯¹å—æåŠ¨ç‰©ï¼ˆä¼é¹…ã€æµ·é¸¥ã€æµ·è±¹ï¼‰çš„é«˜ç²¾åº¦è¯­ä¹‰åˆ†å‰²ã€‚é¡¹ç›®é‡‡ç”¨ **Roboflow** è¿›è¡Œç²¾ç»†åŒ–äººå·¥æ ‡æ³¨ï¼Œå¹¶ç»“åˆ **è¿ç§»å­¦ä¹  (Transfer Learning)** ç­–ç•¥ï¼Œåœ¨ NVIDIA RTX 4060 (8GB) ç¯å¢ƒä¸‹å®Œæˆäº†ä»æ•°æ®å¤„ç†ã€æ¨¡å‹è®­ç»ƒåˆ°æ¨ç†è¯„ä¼°çš„å…¨æµç¨‹ã€‚

---

## ğŸ¯ é¡¹ç›®ç‰¹ç‚¹

- âœ… **é«˜ç²¾åº¦æ ‡æ³¨**: ä½¿ç”¨ Roboflow Polygon Tool è¿›è¡Œåƒç´ çº§äººå·¥æ ‡æ³¨ï¼Œç¡®ä¿ Ground Truth è´¨é‡ã€‚
- âœ… **å®æ—¶åˆ†å‰²**: é‡‡ç”¨ YOLOv8n-seg è½»é‡çº§æ¨¡å‹ï¼Œæ¨ç†é€Ÿåº¦å¿«ï¼Œé€‚é… 8GB æ˜¾å­˜ç¯å¢ƒã€‚
- âœ… **è¿ç§»å­¦ä¹ **: åŸºäº COCO é¢„è®­ç»ƒæƒé‡è¿›è¡Œå¾®è°ƒï¼Œæœ‰æ•ˆåº”å¯¹å°æ ·æœ¬é—®é¢˜ã€‚
- âœ… **å®Œæ•´å·¥ä½œæµ**: åŒ…å«æ•°æ®æ ¼å¼è½¬æ¢ã€æ¨¡å‹è®­ç»ƒã€æ€§èƒ½è¯„ä¼°åŠç»“æœå¯è§†åŒ–çš„å®Œæ•´è„šæœ¬æ”¯æŒã€‚
- âœ… **è¯¦ç»†è¯„ä¼°**: æä¾› Precision, Recall, mAP50, mAP50-95 ç­‰å¤šç»´åº¦è¯„ä»·æŒ‡æ ‡ã€‚

---

## ğŸ› ï¸ ç¯å¢ƒé…ç½®

### ç³»ç»Ÿè¦æ±‚
- Python 3.8+
- CUDA 11.8+ (æ¨èç”¨äº GPU è®­ç»ƒ)
- 8GB+ GPU æ˜¾å­˜ (æ¨è RTX 3060/4060 æˆ–æ›´é«˜)

### å®‰è£…ä¾èµ–

æ¨èä½¿ç”¨ Conda åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š

```powershell
# 1. åˆ›å»ºç¯å¢ƒ
conda create -n hw1 python=3.9 -y

# 2. æ¿€æ´»ç¯å¢ƒ
conda activate hw1

# 3. å®‰è£… PyTorch (è¯·æ ¹æ®ä½ çš„ CUDA ç‰ˆæœ¬è°ƒæ•´)
conda install pytorch torchvision torchaudio pytorch-cuda=11.8 -c pytorch -c nvidia

# 4. å®‰è£…å…¶ä»–ä¾èµ–
pip install -r requirements.txt
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
hw1-semantic-segmentation-Startshark/
â”œâ”€â”€ dataset/                    # åŸå§‹æ•°æ®é›†ç›®å½•  
â”œâ”€â”€ Polar Animal.v9/            # ä» Roboflow å¯¼å‡ºçš„ COCO æ ¼å¼æ•°æ®
â”œâ”€â”€ data/
â”‚   â””â”€â”€ processed/              # è½¬æ¢åçš„ YOLO æ ¼å¼æ•°æ®
â”‚       â”œâ”€â”€ train/
â”‚       â”œâ”€â”€ val/
â”‚       â””â”€â”€ antarctic.yaml      # YOLO æ•°æ®é›†é…ç½®æ–‡ä»¶
â”œâ”€â”€ runs/                       # å®éªŒç»“æœè¾“å‡ºç›®å½•
â”‚   â””â”€â”€ segment/
â”‚       â””â”€â”€ antarctic_yolo_v9/  # æœ¬æ¬¡å®éªŒçš„ä¸»è¦ç»“æœ
â”‚           â”œâ”€â”€ weights/        # è®­ç»ƒå¥½çš„æ¨¡å‹æƒé‡ (best.pt)
â”‚           â”œâ”€â”€ results.png     # è®­ç»ƒæ›²çº¿å›¾
â”‚           â””â”€â”€ appendix_results/ # æ‹¼æ¥åçš„æµ‹è¯•é›†ç»“æœå›¾
â”œâ”€â”€ scripts/                    # åŠŸèƒ½è„šæœ¬
â”‚   â”œâ”€â”€ convert.py              # æ•°æ®æ ¼å¼è½¬æ¢ (COCO -> YOLO)
â”‚   â”œâ”€â”€ train.py                # æ¨¡å‹è®­ç»ƒè„šæœ¬
â”‚   â”œâ”€â”€ test.py                 # æ¨¡å‹æ¨ç†ä¸æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ stitch.py               # ç»“æœæ‹¼æ¥å¯è§†åŒ–è„šæœ¬
â”‚   â””â”€â”€ evaluate.py             # è¯„ä¼°è„šæœ¬
â”œâ”€â”€ report.tex                  # å®éªŒæŠ¥å‘Š LaTeX æºç 
â”œâ”€â”€ requirements.txt            # é¡¹ç›®ä¾èµ–åˆ—è¡¨
â””â”€â”€ yolov8n-seg.pt              # YOLOv8 é¢„è®­ç»ƒæƒé‡
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æ•°æ®å‡†å¤‡

é¦–å…ˆï¼Œç¡®ä¿ä½ å·²ç»ä¸‹è½½äº†æ•°æ®é›†å¹¶æ”¾ç½®åœ¨ `dataset/` ç›®å½•ä¸‹ã€‚ç„¶åè¿è¡Œè½¬æ¢è„šæœ¬ï¼Œå°† COCO JSON æ ¼å¼è½¬æ¢ä¸º YOLO TXT æ ¼å¼ï¼š

```powershell
python scripts/convert.py
```
è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨ç”Ÿæˆ `data/processed/` ç›®å½•å’Œ `antarctic.yaml` é…ç½®æ–‡ä»¶ã€‚

### 2. æ¨¡å‹è®­ç»ƒ

ä½¿ç”¨ `train.py` å¼€å§‹è®­ç»ƒæ¨¡å‹ã€‚ä½ å¯ä»¥æ ¹æ®æ˜¾å­˜å¤§å°è°ƒæ•´ `batch-size`ï¼š

```powershell
python scripts/train.py --epochs 100 --batch-size 8 --img-size 640
```
è®­ç»ƒç»“æœï¼ˆæƒé‡ã€æ—¥å¿—ã€å›¾è¡¨ï¼‰å°†ä¿å­˜åœ¨ `runs/segment/antarctic_yolo_v9/`ã€‚

### 3. æ¨¡å‹æµ‹è¯•ä¸è¯„ä¼°

ä½¿ç”¨è®­ç»ƒå¥½çš„æœ€ä½³æƒé‡ (`best.pt`) å¯¹æµ‹è¯•é›†è¿›è¡Œæ¨ç†ï¼š

```powershell
python scripts/test.py --model runs/segment/antarctic_yolo_v9/weights/best.pt --source data/processed/test/images
```

### 4. ç”Ÿæˆé™„å½•å¯è§†åŒ–å›¾

ä¸ºäº†ç›´è§‚å±•ç¤ºåˆ†å‰²æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨ `stitch.py` ç”ŸæˆåŸå›¾ã€æ©ç å’Œé¢„æµ‹ç»“æœçš„å¯¹æ¯”æ‹¼æ¥å›¾ï¼š

```powershell
python scripts/stitch.py
```
ç”Ÿæˆçš„å›¾ç‰‡å°†ä¿å­˜åœ¨ `runs/segment/antarctic_yolo_v9/appendix_results/stitched_appendix.jpg`ã€‚

---

## ğŸ“Š å®éªŒç»“æœ

### è®­ç»ƒæ›²çº¿
æ¨¡å‹åœ¨ 57 è½®å·¦å³è§¦å‘æ—©åœï¼Œå„é¡¹æŸå¤±å‡½æ•°æ”¶æ•›è‰¯å¥½ï¼ŒmAP æŒ‡æ ‡ç¨³æ­¥æå‡ã€‚

![Training Results](runs/segment/antarctic_yolo_v9/results.png)

### åˆ†å‰²æ•ˆæœå±•ç¤º
ä¸‹å›¾å±•ç¤ºäº†æµ‹è¯•é›†ä¸Šçš„éƒ¨åˆ†åˆ†å‰²ç»“æœï¼ˆå·¦ï¼šåŸå›¾ï¼Œä¸­ï¼šGround Truthï¼Œå³ï¼šé¢„æµ‹ç»“æœï¼‰ï¼š

![Stitched Results](runs/segment/antarctic_yolo_v9/appendix_results/stitched_appendix.jpg)

---

## ğŸ“ æ”¹è¿›æ–¹å‘

è™½ç„¶æ¨¡å‹åœ¨ä¸»è¦ç±»åˆ«ï¼ˆä¼é¹…ï¼‰ä¸Šè¡¨ç°è‰¯å¥½ï¼Œä½†ä»æœ‰æ”¹è¿›ç©ºé—´ï¼š
1.  **æ•°æ®å¢å¼º**: é’ˆå¯¹æµ·è±¹ã€æµ·é¸¥ç­‰å°æ ·æœ¬ç±»åˆ«å¼•å…¥ Mosaic æˆ– Copy-Paste å¢å¼ºã€‚
2.  **æ³¨æ„åŠ›æœºåˆ¶**: å¼•å…¥ CBAM ç­‰æ¨¡å—ä»¥åŒºåˆ†ä¼é¹…ä¸ç›¸ä¼¼çš„å²©çŸ³èƒŒæ™¯ã€‚
3.  **å¼±ç›‘ç£/æ— ç›‘ç£å­¦ä¹ **: æ¢ç´¢åˆ©ç”¨æ— æ ‡æ³¨æ•°æ®è¿›è¡Œé¢„è®­ç»ƒï¼Œé™ä½æ ‡æ³¨æˆæœ¬ã€‚

---

## ğŸ”— å‚è€ƒèµ„æ–™

- [Ultralytics YOLOv8 Docs](https://docs.ultralytics.com/)
- [Roboflow](https://roboflow.com/)
- [COCO Dataset](https://cocodataset.org/)
